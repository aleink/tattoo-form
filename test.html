<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Club Tattoo Management Tool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!-- CSP for Supabase -->
  <meta http-equiv="Content-Security-Policy"
        content="
          default-src 'self';
          script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net ;
          connect-src 'self' https://shlvjhipxnslrncczopn.supabase.co  wss://shlvjhipxnslrncczopn.supabase.co;
          style-src 'self' 'unsafe-inline';
          object-src 'none';
        ">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Helvetica Neue', Arial, sans-serif;
      background: #111;
      color: #fff;
      line-height: 1.5;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background: #000;
      padding: 20px;
      text-align: center;
      border-bottom: 2px solid #444;
    }

    header h1 {
      font-size: 2rem;
      font-weight: 700;
      letter-spacing: 1px;
    }

    nav.tabs {
      display: flex;
      overflow-x: auto;
      background: #222;
      border-bottom: 2px solid #444;
    }

    .tab-link {
      flex-shrink: 0;
      padding: 15px 20px;
      color: #bbb;
      text-decoration: none;
      cursor: pointer;
      transition: background 0.2s;
    }

    .tab-link.active,
    .tab-link:hover {
      background: #333;
      color: #fff;
    }

    main {
      flex: 1;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    footer {
      background: #000;
      color: #666;
      text-align: center;
      padding: 15px;
      border-top: 2px solid #444;
    }

    @media (max-width: 600px) {
      nav.tabs {
        flex-wrap: nowrap;
      }
    }
  </style>
</head>
<body>

<!-- Navigation Tabs -->
<header>
  <h1>Club Tattoo Management Tool</h1>
</header>
<nav class="tabs" id="tabs-nav"></nav>

<!-- Main Content Area -->
<main id="main-content"></main>

<footer>
  <p>&copy; <span id="year"></span> Club Tattoo. All rights reserved.</p>
</footer>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/ @supabase/supabase-js@1.35.7/dist/umd/supabase.min.js"></script>
<script>
  const supabaseUrl = 'https://shlvjhipxnslrncczopn.supabase.co ';
  const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNobHZqaGlweG5zbHJuY2N6b3BuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY2NDgzNjIsImV4cCI6MjA2MjIyNDM2Mn0.oPrYFyW0IsDnNsDpQ9LI0cOm6Y7OIJbjebp2Zjvv_qQ';
  const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

  document.getElementById('year').textContent = new Date().getFullYear();

  const tabsConfig = [
    { id: 'booking-form', title: 'Booking Form' },
    { id: 'calendar', title: 'Calendar' },
    { id: 'artists', title: 'Manage Artists' },
    { id: 'schedules', title: 'Manage Schedules' },
    { id: 'vacations', title: 'Manage Vacations' },
    { id: 'payroll', title: 'Payroll' },
  ];

  function showTab(tabId) {
    document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
  }

  function renderTabs() {
    const nav = document.getElementById('tabs-nav');
    nav.innerHTML = '';

    tabsConfig.forEach(tab => {
      const a = document.createElement('div');
      a.className = 'tab-link';
      a.innerText = tab.title;
      a.onclick = () => showTab(tab.id);
      nav.appendChild(a);
    });

    if (tabsConfig.length > 0) {
      showTab(tabsConfig[0].id);
    }
  }

  async function loadTabContent(tabId) {
    const response = await fetch(`${tabId}.html`);
    const text = await response.text();
    const parser = new DOMParser();
    const doc = parser.parseFromString(text, 'text/html');

    const main = document.getElementById('main-content');
    const container = document.createElement('div');
    container.id = tabId;
    container.className = 'tab-content';

    // Extract body content only
    Array.from(doc.body.children).forEach(child => {
      container.appendChild(child.cloneNode(true));
    });

    main.appendChild(container);
  }

  async function initApp() {
    renderTabs();

    // Load all necessary tab contents
    for (const tab of tabsConfig) {
      await loadTabContent(tab.id);
    }
  }

  window.addEventListener('DOMContentLoaded', initApp);
</script>

</body>
</html>